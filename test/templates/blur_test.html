<!DOCTYPE html>

<title>Blur Test</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.15.4/beautify-html.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.15.4/beautify-css.min.js"></script>
<style>
  .blur-layer {
    backdrop-filter: blur(0px);
    -webkit-backdrop-filter: blur(0px);
    transition: backdrop-filter 0.35s ease-out, -webkit-backdrop-filter 0.35s ease-out;
  }

  .blur-layer.active {
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }
</style>

<body style="margin: 0; padding: 0; font-family: sans-serif; background: white; display: flex; height: 100vh;">
  <div style="width: 50%; padding: 40px; overflow-y: auto; border-right: 1px solid #ddd;">
    <h1 style="margin-top: 0;">Blur Test</h1>
    <p>Click button to toggle backdrop-filter blur on the text box.</p>

    <div style="position: relative; width: 400px; height: 200px; margin-bottom: 30px;">
      <div style="position: absolute; inset: 0; background: white; padding: 20px; color: #333; line-height: 1.6; overflow: hidden;">
        The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog.
      </div>
      <div class="blur-layer" id="blurLayer" style="position: absolute; inset: 0; background: transparent; z-index: 10; pointer-events: none;"></div>
    </div>

    <div style="display: flex; gap: 10px;">
      <button style="padding: 12px 24px; font-size: 16px; cursor: pointer; background: #333; color: white; border: none; border-radius: 4px;">Toggle Blur</button>
      <a id="switchMinify" href="#" style="display: inline-block; padding: 12px 24px; background: #333; color: white; text-decoration: none; border-radius: 4px;"></a>
    </div>
  </div>

  <div style="width: 50%; padding: 40px; overflow-y: auto; display: flex; flex-direction: column;">
    <h2>Page Source (HTML):</h2>
    <button id="formatButton" style="margin-bottom: 10px; padding: 12px 24px; font-size: 16px; cursor: pointer; background: #333; color: white; border: none; border-radius: 4px; width: fit-content;">Format</button>
    <pre id="sourceCode" style="flex: 1; background: #f5f5f5; padding: 20px; border-radius: 4px; overflow-x: auto; border: 1px solid #ddd; margin: 0; font-family: monospace; font-size: 12px; line-height: 1.4;"></pre>
  </div>

  <script>
    const title = document.querySelector('h1')
    const blurLayer = document.getElementById('blurLayer');
    const button = document.querySelector('button');
    const sourceCode = document.getElementById('sourceCode');
    const switchMinify = document.getElementById('switchMinify');
    const formatButton = document.getElementById('formatButton');
    let originalSource = '';
    let isBeautified = false;
    
    button.addEventListener('click', () => {
        blurLayer.classList.toggle('active');
        button.style.color = button.style.color==='green'?'white':'green';
    });

    const isUnminified = window.location.pathname === '/unminified/';
    if (isUnminified) {
        switchMinify.textContent = 'Go to Minified Version';
        switchMinify.href = '/';
        title.textContent = 'Blur Test: Unminified'
    } else {
        switchMinify.textContent = 'Go to Unminified Version';
        switchMinify.href = '/unminified/';
        title.textContent = 'Blur Test: Minified'
    }
    
    formatButton.addEventListener('click', () => {
        if (isBeautified) {
            sourceCode.textContent = originalSource;
            formatButton.textContent = 'Format';
            isBeautified = false;
        } else {
            try {
                sourceCode.textContent = html_beautify(originalSource, {indent_size: 2});
                formatButton.textContent = 'Show Raw';
                isBeautified = true;
            } catch (error) {
                alert('Error beautifying: ' + error.message);
            }
        }
    });
    
    fetch(window.location.href)
        .then(response => response.text())
        .then(html => {
            originalSource = html;
            sourceCode.textContent = html;
        });
  </script>
</body>
